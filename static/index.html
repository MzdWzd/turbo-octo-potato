<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>GC</title>
<style>
body { margin:0; background:#2b2d31; color:white; font-family:sans-serif }
#chat { height:90vh; overflow-y:auto; padding:10px }
#input { height:10vh; display:flex }
input { flex:1; border:none; padding:10px; background:#1e1f22; color:white }
</style>
</head>
<body>

<div id="chat"></div>
<div id="input">
  <input id="msg" placeholder="messageâ€¦" />
</div>

<script>
const user = prompt("username");
const pass = prompt("password");

const ws = new WebSocket(`ws://${location.host}/ws`);
const chat = document.getElementById("chat");
const input = document.getElementById("msg");

ws.onopen = () => {
  ws.send(JSON.stringify({ username:user, password:pass }));
};

ws.onmessage = e => {
  if (e.data === "AUTH_FAIL") { alert("bad password"); return; }
  if (e.data === "AUTH_OK") return;

  const d = document.createElement("div");
  d.textContent = e.data;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
};

input.onkeydown = e => {
  if (e.key === "Enter" && input.value.trim()) {
    ws.send(input.value);
    input.value = "";
  }
};
</script>
</body>
</html>
